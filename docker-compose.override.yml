version: "3.9"

services:
  nginx-proxy:
    profiles: ["disabled"]
  acme-companion:
    profiles: ["disabled"]

  mongo:
    ports:
      - "27017:27017"
    volumes:
      - mongo_data:/data/db

  api:
    environment:
      NODE_ENV: development
      PORT: 3000
      MONGO_URI: "mongodb://mongo:27017/rentalapp"
      JWT_SECRET: "dev-secret"
      CLAUSE_POLICY_VERSION: "1.0.0"
      VIRTUAL_HOST: ""
      LETSENCRYPT_HOST: ""
      LETSENCRYPT_EMAIL: ""
    ports:
      - "3000:3000"
    volumes:
      - uploads_data:/app/uploads
    command: ["npm","run","start:prod"]
